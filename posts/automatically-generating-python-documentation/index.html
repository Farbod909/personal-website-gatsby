<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.21fde45f1a5824b90a1f.css">@import url(https://fonts.googleapis.com/css?family=Lato:400,700|Overpass:400,700,900|Inconsolata&display=swap);html{padding-top:30px;padding-bottom:30px;font-family:Lato,sans-serif;font-size:16px;color:#324332;max-width:1000px;margin:auto;line-height:28px}p{margin-bottom:30px}h1,h2,h3,h4,h5,h6{font-family:Overpass,sans-serif;font-weight:900;margin-top:25px;margin-bottom:20px}h1{font-size:46px;line-height:46px}h2{font-size:38px;line-height:38px}h3{font-size:24px;line-height:24px}a{color:#3bba6c}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.blog-post-module--blogPost--3ISsZ{max-width:700px;margin:auto;padding-left:40px;padding-right:40px}.blog-post-module--blogPost--3ISsZ :not(pre){width:100%}.blog-post-module--backButton--sV5bh{text-decoration:none;border:2px solid #3bba6c;padding:5px 12px 7px 10px;border-radius:20px;-webkit-transition:.2s;transition:.2s}.blog-post-module--backButton--sV5bh:hover{color:#fff;background-color:#3bba6c}.Sidebar-module--sidebar--31uFS{float:left;width:calc(30% - 81px);border-right:1px solid #ddd;padding-left:40px;padding-right:40px}@media only screen and (max-width:960px){.Sidebar-module--sidebar--31uFS{width:calc(40% - 81px)}}@media only screen and (max-width:600px){.Sidebar-module--sidebar--31uFS{border-right:none;width:calc(100% - 80px)}}.Sidebar-module--menuList--2hPot{padding:0;list-style:none;font-family:Overpass,sans-serif;font-size:20px;line-height:40px}.Sidebar-module--menuList--2hPot li a{color:#324332;text-decoration:none;-webkit-transition:.2s;transition:.2s}.Sidebar-module--menuList--2hPot li a:hover{cursor:pointer;color:#3bba6c;text-decoration:underline}.Sidebar-module--menuList--2hPot li a.Sidebar-module--active--AmL6r{color:#3bba6c;font-weight:900;text-decoration:underline}.Sidebar-module--socialList--3qgzF{padding:0;list-style:none}.Sidebar-module--socialList--3qgzF li{display:inline-block;border:2px solid #324332;border-radius:100px;margin-right:10px;width:30px;height:30px;text-align:center;-webkit-transition:.2s;transition:.2s}.Sidebar-module--socialList--3qgzF li:hover{color:#3bba6c;border-color:#3bba6c}.Sidebar-module--socialList--3qgzF a{color:#324332}.Content-module--content--ifVFL{float:right;width:calc(70% - 80px);padding-left:40px;padding-right:40px}@media only screen and (max-width:960px){.Content-module--content--ifVFL{width:calc(60% - 80px)}}@media only screen and (max-width:600px){.Content-module--content--ifVFL{width:calc(100% - 80px)}}</style><meta name="generator" content="Gatsby 2.18.10"/><link rel="icon" href="/icons/icon-48x48.png?v=c43360b5562481a007f9b8d6acd321a9"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#6b37bf"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=c43360b5562481a007f9b8d6acd321a9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=c43360b5562481a007f9b8d6acd321a9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=c43360b5562481a007f9b8d6acd321a9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=c43360b5562481a007f9b8d6acd321a9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=c43360b5562481a007f9b8d6acd321a9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=c43360b5562481a007f9b8d6acd321a9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=c43360b5562481a007f9b8d6acd321a9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=c43360b5562481a007f9b8d6acd321a9"/><title data-react-helmet="true">Automatically Generating Python Documentation | Farbod Rafezy</title><meta data-react-helmet="true" name="description" content="Let&#x27;s say you&#x27;ve written some Python code and along the way you realized that other people might want to look at your code or even use it in…"/><meta data-react-helmet="true" property="og:title" content="Automatically Generating Python Documentation"/><meta data-react-helmet="true" property="og:description" content="Let&#x27;s say you&#x27;ve written some Python code and along the way you realized that other people might want to look at your code or even use it in…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Farbod Rafezy"/><meta data-react-helmet="true" name="twitter:title" content="Automatically Generating Python Documentation"/><meta data-react-helmet="true" name="twitter:description" content="Let&#x27;s say you&#x27;ve written some Python code and along the way you realized that other people might want to look at your code or even use it in…"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/app-2977e7e9b505daac3554.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-bd38c3a685b8934ad1e6.js"/><link as="script" rel="preload" href="/styles-5b67c836f607213d118c.js"/><link as="script" rel="preload" href="/commons-2a1191a6ab5a536c0109.js"/><link as="script" rel="preload" href="/webpack-runtime-0b320b99d70e9605de3b.js"/><link as="fetch" rel="preload" href="/page-data/posts/automatically-generating-python-documentation/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="blog-post-module--blogPost--3ISsZ"><a class="blog-post-module--backButton--sV5bh" href="/blog"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-left" class="svg-inline--fa fa-chevron-left fa-w-10 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg> Blog</a><h1 style="font-size:54px;line-height:54px;margin-bottom:40px">Automatically Generating Python Documentation</h1><div><p>Let's say you've written some Python code and along the way you realized that other people might want to look at your code or even use it in their own projects. Luckily, you've documented your code using docstrings, right? Well, if you haven't, I'd recommend doing it from the very beginning. Saving it for last will definitely cause you a lot of headaches down the road. So, let's start with documenting our code properly.</p>
<h2>Documenting your code with docstrings</h2>
<p>Docstrings are small snippets of text that you use to explain the <em>why</em> and <em>what</em> behind your code. This is different from commenting your code, which is useful for explaining <em>how</em> your code works.</p>
<p>It might be easier to demonstrate this with an example:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">random_number</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Generates a random int of any length.

    Args:
        n (int): number of digits desired

    Returns:
        int: A random int with n digits
    """</span>

	<span class="token comment"># Make sure random number range doesn't start at zero.</span>
    range_start <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">**</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    range_end <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">**</span> n<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token keyword">return</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span>range_start<span class="token punctuation">,</span> range_end<span class="token punctuation">)</span></code></pre></div>
<p>The comment that comes directly after <code class="language-text">def random_number(n):</code> is called the docstring. As you can see, the first line explains what the function does, but not how it does it. We also want to inform the user what arguments the function accepts and what it returns. In this scenario, the user could be a lot of different people; another developer peer-reviewing your code, someone who is trying to use your function in their own project, or an open-source contributor. This docstring will help that person understand the intent behind your code and speed up the process. Sometimes lack of documentation prevents people from looking at your code altogether.</p>
<p>This is a very simple example, but if you want to learn more about how to document your code better, take a look at <a href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html#example-google">an extensive example</a>.</p>
<h2>Automatically generating HTML files</h2>
<p>If you've documented your code with docstrings, you've done the bulk of the work, congrats! 🥳 But we can still make it better.</p>
<p>There exists a python library called Sphinx that will automatically convert your docstrings to HTML files, which can then be published anywhere you want. How cool is that? Cmon, It's kinda cool, no? Well... at least it's useful.</p>
<h3>Setting up Sphinx</h3>
<p>Let's first install it.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ pip install Sphinx</code></pre></div>
<p>Then, open your terminal and navigate to the root of your project. Now we can run the following:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ sphinx-quickstart ./docs</code></pre></div>
<p>After you run this, just accept the defaults when prompted. This will create a folder called <code class="language-text">docs/</code> inside your project and fill it with some files we're going to use to document our project. You don't need to know what all these files and folders do, so don't worry. The first file we'll look at is <code class="language-text">index.rst</code>. You can go ahead and open that file with any text editor and it should something like this:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Welcome to Hello&#39;s documentation!
=================================

.. toctree::
   :maxdepth: 2
   :caption: Contents:



Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`</code></pre></div>
<p>The format this file is created in is called <a href="http://docutils.sourceforge.net/rst.html">reStructuredText</a>. Feel free to read up on that, but for our purposes, we don't need to know much to be able to generate our documentation.</p>
<p>Let's test things out:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ cd docs
$ make html</code></pre></div>
<p>The terminal should tell you that <code class="language-text">The HTML pages are in _build/html.</code> We can take a look at that folder in finder or whatever file explorer you have, and we'll notice an <code class="language-text">index.html</code> file. Go ahead and open that file with your web browser. You should see something like this:</p>
<p><img src="https://i.imgur.com/VVWBUuV.png" alt="empty index.html"></p>
<p>It's empty, but this is our starting point.</p>
<h3>Autogenerating documentation</h3>
<p>Okay, so Sphinx is all set up, but how do we actually get to see the documentation from all the docstrings that we wrote show up in this HTML file? Let's go through that.</p>
<p>Let's say your project looks something like this now:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">my_project/
	src/
		my_code.py
	docs/
		_build/
		_static/
		_templates/
		conf.py
		index.rst
		make.bat
		Makefile</code></pre></div>
<p>Let's open <code class="language-text">docs/conf.py</code> in a text editor and make the following changes:
Instead of</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">extensions = [
]</code></pre></div>
<p>Let's write</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">extensions = [&quot;sphinx.ext.autodoc&quot;, &quot;sphinx.ext.coverage&quot;, &quot;sphinx.ext.napoleon&quot;]</code></pre></div>
<p>Also, around line 15 we should see something like:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># import os</span>
<span class="token comment"># import sys</span>
<span class="token comment"># sys.path.insert(0, os.path.abspath('.'))</span></code></pre></div>
<p>Let's replace that with</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> sys
sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span><span class="token string">"../src"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>Now let's navigate back to the root of the directory and run the following command:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ sphinx-apidoc -f -o docs/source src</code></pre></div>
<p>Sphinx let's us know that it's created some files:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Creating file docs/source/my_code.rst.
Creating file docs/source/modules.rst.</code></pre></div>
<p>Now if we go back to the <code class="language-text">docs/</code> folder and <code class="language-text">make html</code> we should see something along the lines of:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">**Running Sphinx v2.1.2**
**loading pickled environment...** done
**building [mo]:** targets for 0 po files that are out of date
**building [html]**: targets for 0 source files that are out of date
**updating environment:** [] 0 added, 1 changed, 0 removed
**reading sources...** [100%] source/my_code
**looking for now-outdated files...** none found
**pickling environment...** done
**checking consistency...** **/path/to/proj/docs/source/modules.rst: WARNING: document isn&#39;t included in any toctree**
done
**preparing documents...** done
**writing output...** [100%] source/my_code
**generating indices...** genindex py-modindex
**writing additional pages...** search
**copying static files...** done
**copying extra files...** done
**dumping search index in English (code: en) ...** done
**dumping object inventory...** done
**build succeeded, 1 warning.**</code></pre></div>
<p>So it succeeded, that's awesome! But there's a warning.. oh no, what the hell went wrong? Well, if we recall, <code class="language-text">index.rst</code> is the starting point for our documentation. But we haven't referenced any of the autogenerated documentation from within that file. So, let's do that. Open <code class="language-text">index.rst</code> in a text editor and make the following changes:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Welcome to Hello&#39;s documentation!
=================================

.. toctree::
   :maxdepth: 2
   :caption: Contents:

   source/modules



Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`</code></pre></div>
<p>We added <code class="language-text">source/modules</code> to the table of contents. Now, lets navigate to the <code class="language-text">docs/</code> folder and <code class="language-text">make html</code> again.</p>
<p>Now, if we open up <code class="language-text">docs/_build/html/index.html</code> we should see:</p>
<p><img src="https://i.imgur.com/sFEGMoC.png" alt="index.html"></p>
<p>If we click on <code class="language-text">my_code_module</code>, we'll finally be able to see our docstrings beautified!</p>
<p><img src="https://i.imgur.com/Gd4rwR0.png" alt="my_code docstring"></p>
<p>Beautiful.</p>
<h2>Summary</h2>
<p>At this point we've documented all of our code for developers and users alike to look at, <strong>and</strong> we've also been able to automatically generate HTML documentation for our code so that we may publish it to a website in the future, much like other large and respectable projects like <a href="https://docs.djangoproject.com/en/2.2/">Django</a> and <a href="https://docs.pytest.org/en/latest/contents.html">pytest</a>. If you look closely, pytest's documentation almost looks exactly like the default theme for the HTML files from this very tutorial!</p>
<h3>Additional Resources</h3>
<ul>
<li><a href="https://github.com/django/django/tree/master/docs">Django docs source</a></li>
<li><a href="http://www.sphinx-doc.org/en/master/">Sphinx</a></li>
<li><a href="http://docutils.sourceforge.net/rst.html">reStructuredText</a></li>
<li><a href="https://github.com/google/styleguide/blob/gh-pages/pyguide.md#38-comments-and-docstrings">Google style guide for Python docstrings</a></li>
<li><a href="https://www.sphinx-doc.org/en/master/usage/extensions/napoleon.html">Sphinx support for Numpy and Google style docstrings</a></li>
</ul></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-154425521-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/automatically-generating-python-documentation";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-2977e7e9b505daac3554.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-5efb7b8fb8a6286e0a5c.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-bd38c3a685b8934ad1e6.js"],"component---src-pages-about-js":["/component---src-pages-about-js-c6e327d1a44f939101db.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-f14034df588cae390123.js"],"component---src-pages-index-js":["/component---src-pages-index-js-65bb0324c747a65599ba.js"]};/*]]>*/</script><script src="/webpack-runtime-0b320b99d70e9605de3b.js" async=""></script><script src="/commons-2a1191a6ab5a536c0109.js" async=""></script><script src="/styles-5b67c836f607213d118c.js" async=""></script><script src="/component---src-templates-blog-post-js-bd38c3a685b8934ad1e6.js" async=""></script><script src="/app-2977e7e9b505daac3554.js" async=""></script></body></html>